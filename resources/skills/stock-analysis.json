{
  "id": "stock-analysis",
  "name": "Stock Analysis",
  "description": "Analyze stocks, ETFs, and crypto using Yahoo Finance and Alpha Vantage. Get real-time quotes, fundamentals (P/E, EPS, margins, balance sheet), technical indicators (RSI, MACD, Bollinger), dividends, earnings, options chains, analyst ratings, institutional holders, sector comparisons, and screening. Use when the user asks about stock prices, company financials, market trends, portfolio analysis, or any investment research.",
  "icon": "üìà",
  "category": "Tools",
  "requires": {
    "anyBins": ["python3", "curl"]
  },
  "prompt": "# Stock Analysis ‚Äî Market Intelligence\n\nAnalyze stocks, ETFs, indices, and crypto using free public APIs. Two data sources:\n\n| Source | Auth | Best For |\n|--------|------|----------|\n| **Yahoo Finance** (via curl or yfinance) | None | Real-time quotes, charts, fundamentals, options, news |\n| **Alpha Vantage** | Free API key | Technical indicators, historical data, forex, screening |\n\n---\n\n## Method 1: Yahoo Finance (curl ‚Äî no dependencies)\n\n### Real-time quote + key stats\n\n```bash\ncurl -s 'https://query1.finance.yahoo.com/v8/finance/chart/AAPL?interval=1d&range=1d' | python3 -c \"\nimport json, sys\nd = json.load(sys.stdin)['chart']['result'][0]\nm = d['meta']\nprint(f'{m[\"symbol\"]} ‚Äî {m.get(\"longName\", m[\"symbol\"])}')\nprint(f'Price: \\${m[\"regularMarketPrice\"]:.2f}')\nprint(f'Prev Close: \\${m[\"chartPreviousClose\"]:.2f}')\nchg = m['regularMarketPrice'] - m['chartPreviousClose']\npct = (chg / m['chartPreviousClose']) * 100\narrow = '‚Üë' if chg > 0 else '‚Üì' if chg < 0 else '‚Äî'\nprint(f'Change: {arrow} \\${abs(chg):.2f} ({abs(pct):.2f}%)')\nprint(f'Day Range: \\${m[\"regularMarketDayLow\"]:.2f} ‚Äì \\${m[\"regularMarketDayHigh\"]:.2f}')\nprint(f'52-Week: \\${m[\"fiftyTwoWeekLow\"]:.2f} ‚Äì \\${m[\"fiftyTwoWeekHigh\"]:.2f}')\nprint(f'Volume: {m[\"regularMarketVolume\"]:,}')\n\"\n```\n\n### Historical price data\n\n```bash\n# Intervals: 1m, 5m, 15m, 30m, 1h, 1d, 1wk, 1mo\n# Ranges: 1d, 5d, 1mo, 3mo, 6mo, 1y, 2y, 5y, 10y, ytd, max\ncurl -s 'https://query1.finance.yahoo.com/v8/finance/chart/AAPL?interval=1d&range=6mo'\n```\n\n### Multiple quotes at once\n\n```bash\ncurl -s 'https://query1.finance.yahoo.com/v8/finance/chart/AAPL?interval=1d&range=1d' \\\n     -s 'https://query1.finance.yahoo.com/v8/finance/chart/MSFT?interval=1d&range=1d' \\\n     -s 'https://query1.finance.yahoo.com/v8/finance/chart/GOOGL?interval=1d&range=1d'\n```\n\n### Crypto quotes\n\nCrypto tickers use the format `SYMBOL-USD`:\n\n```bash\ncurl -s 'https://query1.finance.yahoo.com/v8/finance/chart/BTC-USD?interval=1d&range=1d'\ncurl -s 'https://query1.finance.yahoo.com/v8/finance/chart/ETH-USD?interval=1d&range=5d'\ncurl -s 'https://query1.finance.yahoo.com/v8/finance/chart/SOL-USD?interval=1d&range=1mo'\n```\n\n### Index quotes\n\n```bash\ncurl -s 'https://query1.finance.yahoo.com/v8/finance/chart/%5EGSPC?interval=1d&range=5d'   # S&P 500\ncurl -s 'https://query1.finance.yahoo.com/v8/finance/chart/%5EIXIC?interval=1d&range=5d'   # NASDAQ\ncurl -s 'https://query1.finance.yahoo.com/v8/finance/chart/%5EDJI?interval=1d&range=5d'    # Dow Jones\ncurl -s 'https://query1.finance.yahoo.com/v8/finance/chart/%5EVIX?interval=1d&range=5d'    # VIX\ncurl -s 'https://query1.finance.yahoo.com/v8/finance/chart/%5EFTSE?interval=1d&range=5d'   # FTSE 100\n```\n\nNote: `^` must be URL-encoded as `%5E` in curl.\n\n---\n\n## Method 2: yfinance (Python ‚Äî richer data)\n\nInstall: `pip install yfinance`\n\n### Full company profile + key stats\n\n```bash\npython3 -c \"\nimport yfinance as yf\nt = yf.Ticker('AAPL')\ni = t.info\nprint(f'{i.get(\"shortName\", \"\")} ({i[\"symbol\"]})')\nprint(f'Sector: {i.get(\"sector\", \"N/A\")} | Industry: {i.get(\"industry\", \"N/A\")}')\nprint(f'Price: \\${i.get(\"currentPrice\", 0):.2f}  Mkt Cap: \\${i.get(\"marketCap\", 0)/1e9:.1f}B')\nprint(f'P/E: {i.get(\"trailingPE\", \"N/A\")}  Fwd P/E: {i.get(\"forwardPE\", \"N/A\")}')\nprint(f'EPS (TTM): \\${i.get(\"trailingEps\", \"N/A\")}  Fwd EPS: \\${i.get(\"forwardEps\", \"N/A\")}')\nprint(f'PEG: {i.get(\"pegRatio\", \"N/A\")}  P/S: {i.get(\"priceToSalesTrailing12Months\", \"N/A\"):.2f}')\nprint(f'P/B: {i.get(\"priceToBook\", \"N/A\")}  EV/EBITDA: {i.get(\"enterpriseToEbitda\", \"N/A\")}')\nprint(f'Div Yield: {(i.get(\"dividendYield\", 0) or 0)*100:.2f}%  Payout: {(i.get(\"payoutRatio\", 0) or 0)*100:.1f}%')\nprint(f'Beta: {i.get(\"beta\", \"N/A\")}  52-Week: \\${i.get(\"fiftyTwoWeekLow\", 0):.2f} ‚Äì \\${i.get(\"fiftyTwoWeekHigh\", 0):.2f}')\nprint(f'Revenue: \\${i.get(\"totalRevenue\", 0)/1e9:.1f}B  Profit Margin: {(i.get(\"profitMargins\", 0) or 0)*100:.1f}%')\nprint(f'ROE: {(i.get(\"returnOnEquity\", 0) or 0)*100:.1f}%  ROA: {(i.get(\"returnOnAssets\", 0) or 0)*100:.1f}%')\nprint(f'Debt/Equity: {i.get(\"debtToEquity\", \"N/A\")}  Current Ratio: {i.get(\"currentRatio\", \"N/A\")}')\nprint(f'Free Cash Flow: \\${i.get(\"freeCashflow\", 0)/1e9:.1f}B')\nprint(f'Shares Outstanding: {i.get(\"sharesOutstanding\", 0)/1e9:.2f}B')\nprint(f'Float Short: {(i.get(\"shortPercentOfFloat\", 0) or 0)*100:.2f}%')\n\"\n```\n\n### Financial statements\n\n```bash\npython3 -c \"\nimport yfinance as yf\nt = yf.Ticker('AAPL')\nprint('=== Income Statement (Annual) ===')\nprint(t.financials.to_string())\nprint('\\n=== Balance Sheet ===')\nprint(t.balance_sheet.to_string())\nprint('\\n=== Cash Flow ===')\nprint(t.cashflow.to_string())\n\"\n```\n\n### Quarterly financials\n\n```bash\npython3 -c \"\nimport yfinance as yf\nt = yf.Ticker('AAPL')\nprint(t.quarterly_financials.to_string())\n\"\n```\n\n### Earnings history + estimates\n\n```bash\npython3 -c \"\nimport yfinance as yf\nt = yf.Ticker('AAPL')\nprint('=== Earnings History ===')\nprint(t.earnings_history.to_string() if hasattr(t, 'earnings_history') else 'N/A')\nprint('\\n=== Earnings Dates ===')\nprint(t.earnings_dates.to_string())\nprint('\\n=== Analyst Price Targets ===')\nfor k, v in t.analyst_price_targets.items():\n    print(f'  {k}: \\${v:.2f}' if isinstance(v, (int, float)) else f'  {k}: {v}')\n\"\n```\n\n### Analyst recommendations\n\n```bash\npython3 -c \"\nimport yfinance as yf\nt = yf.Ticker('AAPL')\nprint('=== Recommendations ===')\nprint(t.recommendations.tail(10).to_string())\nprint('\\n=== Recommendation Summary ===')\nprint(t.recommendations_summary.to_string() if t.recommendations_summary is not None else 'N/A')\n\"\n```\n\n### Institutional & major holders\n\n```bash\npython3 -c \"\nimport yfinance as yf\nt = yf.Ticker('AAPL')\nprint('=== Major Holders ===')\nprint(t.major_holders.to_string())\nprint('\\n=== Top Institutional Holders ===')\nprint(t.institutional_holders.head(15).to_string())\nprint('\\n=== Mutual Fund Holders ===')\nprint(t.mutualfund_holders.head(10).to_string())\n\"\n```\n\n### Dividends & splits\n\n```bash\npython3 -c \"\nimport yfinance as yf\nt = yf.Ticker('AAPL')\nprint('=== Dividends (last 20) ===')\nprint(t.dividends.tail(20).to_string())\nprint('\\n=== Splits ===')\nprint(t.splits.to_string())\n\"\n```\n\n### Options chain\n\n```bash\npython3 -c \"\nimport yfinance as yf\nt = yf.Ticker('AAPL')\nprint('Expiration dates:', t.options)\nopt = t.option_chain(t.options[0])  # nearest expiry\nprint('\\n=== Calls (top 10 by volume) ===')\nprint(opt.calls.sort_values('volume', ascending=False).head(10)[['strike','lastPrice','bid','ask','volume','openInterest','impliedVolatility']].to_string())\nprint('\\n=== Puts (top 10 by volume) ===')\nprint(opt.puts.sort_values('volume', ascending=False).head(10)[['strike','lastPrice','bid','ask','volume','openInterest','impliedVolatility']].to_string())\n\"\n```\n\n### News\n\n```bash\npython3 -c \"\nimport yfinance as yf\nt = yf.Ticker('AAPL')\nfor n in t.news[:10]:\n    print(f'  {n.get(\"title\", \"\")}  ‚Äî  {n.get(\"publisher\", \"\")}')\n    print(f'  {n.get(\"link\", \"\")}')\n    print()\n\"\n```\n\n### Sector & industry comparison\n\n```bash\npython3 -c \"\nimport yfinance as yf\ns = yf.Sector('technology')\nprint('=== Technology Sector Overview ===')\nprint(f'Symbol: {s.symbol}')\nprint(f'Name: {s.name}')\nprint(s.overview.to_string() if s.overview is not None else '')\nprint('\\n=== Top Industries ===')\nprint(s.industries.head(10).to_string() if s.industries is not None else '')\n\"\n```\n\n### Stock screener\n\n```bash\npython3 -c \"\nimport yfinance as yf\nfrom yfinance import EquityQuery, Screener\n\n# Example: large-cap tech with P/E under 30\nq = EquityQuery('and', [\n    EquityQuery('gt', ['intradaymarketcap', 100_000_000_000]),\n    EquityQuery('lt', ['peratio.lasttwelvemonths', 30]),\n    EquityQuery('eq', ['sector', 'Technology']),\n])\nsc = Screener()\nsc.set_body(q, sortField='intradaymarketcap', sortAsc=False)\nresult = sc.response\nfor quote in result.get('quotes', [])[:15]:\n    print(f'{quote[\"symbol\"]:8s} {quote.get(\"shortName\",\"\"):30s} PE:{quote.get(\"trailingPE\",\"N/A\"):>8} MCap:{quote.get(\"marketCap\",0)/1e9:>8.1f}B')\n\"\n```\n\n---\n\n## Method 3: Alpha Vantage (free API key)\n\nGet a free key at https://www.alphavantage.co/support/#api-key\n\nStore it:\n```bash\nmkdir -p ~/.config/alphavantage\necho \"YOUR_KEY\" > ~/.config/alphavantage/api_key\n```\n\n### Real-time quote\n\n```bash\nAV_KEY=$(cat ~/.config/alphavantage/api_key 2>/dev/null || echo 'demo')\ncurl -s \"https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=AAPL&apikey=$AV_KEY\" | python3 -c \"\nimport json, sys\nd = json.load(sys.stdin).get('Global Quote', {})\nprint(f'{d.get(\"01. symbol\", \"\")}  \\${d.get(\"05. price\", \"\")}  Chg: {d.get(\"09. change\", \"\")} ({d.get(\"10. change percent\", \"\")})')\n\"\n```\n\n### Technical indicators\n\n```bash\nAV_KEY=$(cat ~/.config/alphavantage/api_key 2>/dev/null || echo 'demo')\n\n# RSI\ncurl -s \"https://www.alphavantage.co/query?function=RSI&symbol=AAPL&interval=daily&time_period=14&series_type=close&apikey=$AV_KEY\"\n\n# MACD\ncurl -s \"https://www.alphavantage.co/query?function=MACD&symbol=AAPL&interval=daily&series_type=close&apikey=$AV_KEY\"\n\n# Bollinger Bands\ncurl -s \"https://www.alphavantage.co/query?function=BBANDS&symbol=AAPL&interval=daily&time_period=20&series_type=close&apikey=$AV_KEY\"\n\n# SMA (50-day and 200-day)\ncurl -s \"https://www.alphavantage.co/query?function=SMA&symbol=AAPL&interval=daily&time_period=50&series_type=close&apikey=$AV_KEY\"\ncurl -s \"https://www.alphavantage.co/query?function=SMA&symbol=AAPL&interval=daily&time_period=200&series_type=close&apikey=$AV_KEY\"\n\n# EMA\ncurl -s \"https://www.alphavantage.co/query?function=EMA&symbol=AAPL&interval=daily&time_period=20&series_type=close&apikey=$AV_KEY\"\n\n# Stochastic\ncurl -s \"https://www.alphavantage.co/query?function=STOCH&symbol=AAPL&interval=daily&apikey=$AV_KEY\"\n\n# ADX (trend strength)\ncurl -s \"https://www.alphavantage.co/query?function=ADX&symbol=AAPL&interval=daily&time_period=14&apikey=$AV_KEY\"\n\n# OBV (On-Balance Volume)\ncurl -s \"https://www.alphavantage.co/query?function=OBV&symbol=AAPL&interval=daily&apikey=$AV_KEY\"\n```\n\n### Symbol search\n\n```bash\nAV_KEY=$(cat ~/.config/alphavantage/api_key 2>/dev/null || echo 'demo')\ncurl -s \"https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords=tesla&apikey=$AV_KEY\"\n```\n\n### Market status\n\n```bash\nAV_KEY=$(cat ~/.config/alphavantage/api_key 2>/dev/null || echo 'demo')\ncurl -s \"https://www.alphavantage.co/query?function=MARKET_STATUS&apikey=$AV_KEY\"\n```\n\n---\n\n## Computed Technical Analysis (No API key)\n\nWhen Alpha Vantage isn't configured, compute indicators from Yahoo Finance price data:\n\n```bash\npython3 -c \"\nimport json, urllib.request\n\nsymbol = 'AAPL'\nurl = f'https://query1.finance.yahoo.com/v8/finance/chart/{symbol}?interval=1d&range=6mo'\nwith urllib.request.urlopen(url) as r:\n    data = json.load(r)\n\nresult = data['chart']['result'][0]\ncloses = result['indicators']['quote'][0]['close']\ncloses = [c for c in closes if c is not None]\n\n# SMA\ndef sma(data, n): return sum(data[-n:]) / n if len(data) >= n else None\n\n# RSI (14-day)\ndef rsi(data, n=14):\n    deltas = [data[i] - data[i-1] for i in range(1, len(data))]\n    gains = [d if d > 0 else 0 for d in deltas[-n:]]\n    losses = [-d if d < 0 else 0 for d in deltas[-n:]]\n    avg_gain = sum(gains) / n\n    avg_loss = sum(losses) / n\n    if avg_loss == 0: return 100\n    rs = avg_gain / avg_loss\n    return 100 - (100 / (1 + rs))\n\n# MACD\ndef ema(data, n):\n    k = 2 / (n + 1)\n    result = [data[0]]\n    for price in data[1:]:\n        result.append(price * k + result[-1] * (1 - k))\n    return result\n\nema12 = ema(closes, 12)\nema26 = ema(closes, 26)\nmacd_line = ema12[-1] - ema26[-1]\nsignal = ema([e12 - e26 for e12, e26 in zip(ema12[-9:], ema26[-9:])], 9)[-1] if len(closes) >= 35 else None\n\nprint(f'{symbol} Technical Summary')\nprint(f'Price:    \\${closes[-1]:.2f}')\nprint(f'SMA 20:   \\${sma(closes, 20):.2f}' if sma(closes, 20) else '')\nprint(f'SMA 50:   \\${sma(closes, 50):.2f}' if sma(closes, 50) else '')\nprint(f'SMA 200:  \\${sma(closes, 200):.2f}' if sma(closes, 200) else 'SMA 200: N/A (need more data)')\nprint(f'RSI (14): {rsi(closes):.1f}')\nprint(f'MACD:     {macd_line:.3f}')\nif signal: print(f'Signal:   {signal:.3f}')\n\n# Position relative to SMAs\nif sma(closes, 50) and sma(closes, 200):\n    if sma(closes, 50) > sma(closes, 200): print('Trend: Golden Cross (bullish)')\n    else: print('Trend: Death Cross (bearish)')\nif rsi(closes) > 70: print('RSI: Overbought')\nelif rsi(closes) < 30: print('RSI: Oversold')\nelse: print(f'RSI: Neutral')\n\"\n```\n\n---\n\n## 8-Dimensional Stock Score\n\nWhen asked to score or rate a stock, evaluate across these 8 dimensions:\n\n| # | Dimension | Key Metrics | Weight |\n|---|-----------|-------------|--------|\n| 1 | **Valuation** | P/E, Fwd P/E, PEG, P/S, P/B, EV/EBITDA | 15% |\n| 2 | **Profitability** | Profit margin, ROE, ROA, operating margin | 15% |\n| 3 | **Growth** | Revenue growth, EPS growth, earnings surprise | 15% |\n| 4 | **Financial Health** | Debt/equity, current ratio, free cash flow, interest coverage | 12.5% |\n| 5 | **Technical Momentum** | RSI, MACD, SMA crossovers, 52-week position | 12.5% |\n| 6 | **Dividend Quality** | Yield, payout ratio, growth history, consistency | 10% |\n| 7 | **Analyst Sentiment** | Buy/hold/sell ratings, price target vs current, upgrades/downgrades | 10% |\n| 8 | **Risk** | Beta, short interest, volatility, sector risk | 10% |\n\nScore each dimension 1-10. Provide an overall weighted score.\n\n### Scoring guidelines\n\n**Valuation (1-10):**\n- 9-10: Deeply undervalued (P/E < 10, PEG < 0.5)\n- 7-8: Moderately undervalued\n- 5-6: Fairly valued\n- 3-4: Moderately overvalued\n- 1-2: Extremely overvalued (P/E > 50, PEG > 3)\n\n**Profitability (1-10):**\n- 9-10: Exceptional (ROE > 30%, margins > 25%)\n- 7-8: Strong\n- 5-6: Average\n- 3-4: Below average\n- 1-2: Unprofitable\n\n**Growth (1-10):**\n- 9-10: Hyper growth (>30% revenue + earnings growth)\n- 7-8: Strong growth (15-30%)\n- 5-6: Moderate (5-15%)\n- 3-4: Slow (<5%)\n- 1-2: Declining\n\n**Financial Health (1-10):**\n- 9-10: Fortress balance sheet (D/E < 0.3, strong FCF)\n- 7-8: Healthy\n- 5-6: Adequate\n- 3-4: Leveraged\n- 1-2: Distressed\n\n---\n\n## Common Workflows\n\n### \"Analyze AAPL for me\"\n\n1. Fetch real-time quote (Yahoo chart API)\n2. Fetch full profile with yfinance (P/E, margins, growth, etc.)\n3. Compute technical indicators (RSI, MACD, SMA)\n4. Get analyst recommendations and price targets\n5. Check recent news\n6. Run the 8-dimensional score\n7. Present a structured report\n\n### \"Compare AAPL vs MSFT\"\n\n1. Fetch both profiles\n2. Side-by-side: price, market cap, P/E, margins, growth, dividends\n3. Technical comparison (RSI, trend)\n4. Analyst consensus comparison\n5. Table format with winner per category\n\n### \"What are the best tech stocks under $50?\"\n\n1. Use yfinance Screener with EquityQuery\n2. Filter: sector=Technology, price < 50, marketCap > 1B\n3. Sort by a meaningful metric (P/E, growth, volume)\n4. Present top 10-15 with key stats\n\n### \"Should I buy TSLA?\"\n\n1. Full 8-dimensional analysis\n2. Bull case vs bear case (from fundamentals + technicals)\n3. Analyst consensus and price target range\n4. Key risks (beta, short interest, valuation)\n5. Clear conclusion with confidence level\n\n### \"How are my stocks doing?\" (portfolio review)\n\n1. User provides tickers (and optionally cost basis)\n2. Fetch current prices for all\n3. Calculate P&L per position and total\n4. Highlight biggest winners/losers\n5. Portfolio-level metrics (diversification, beta, dividend yield)\n\n### \"What's moving today?\" (market scan)\n\n1. Fetch major indices (S&P 500, NASDAQ, Dow, VIX)\n2. Identify sectors leading/lagging\n3. Note any earnings reports today\n4. Show biggest volume spikes or unusual moves\n\n### \"Show me the options chain for AAPL\"\n\n1. Fetch options via yfinance\n2. Show expiration dates\n3. Display calls/puts sorted by volume\n4. Highlight unusual activity (high volume vs open interest)\n5. Show implied volatility\n\n### \"Dividend analysis for KO\"\n\n1. Current yield, payout ratio, ex-dividend date\n2. Dividend growth history (5yr, 10yr CAGR)\n3. Dividend aristocrat/king status\n4. Payout sustainability (FCF coverage)\n5. Compare yield to sector average\n\n### \"Is the market overbought?\"\n\n1. S&P 500 RSI, MACD, distance from 200-day SMA\n2. VIX level and trend\n3. Advance/decline breadth\n4. Sector rotation signals\n5. Put/call ratio context\n\n---\n\n## Common Ticker Formats\n\n| Type | Format | Example |\n|------|--------|----------|\n| US Stock | `AAPL` | Apple Inc. |\n| ETF | `SPY` | S&P 500 ETF |\n| Index | `^GSPC` | S&P 500 |\n| Crypto | `BTC-USD` | Bitcoin |\n| Forex | `EURUSD=X` | EUR/USD |\n| Intl Stock | `7203.T` | Toyota (Tokyo) |\n| UK Stock | `SHEL.L` | Shell (London) |\n\n---\n\n## Formatting Guidelines\n\nWhen presenting financial data:\n\n- **Prices**: `$272.18` ‚Äî always 2 decimal places\n- **Market cap**: `$3.4T`, `$125.6B`, `$2.1B` ‚Äî human-readable\n- **Percentages**: `12.5%` ‚Äî 1 decimal place\n- **Ratios**: P/E `28.5`, P/B `12.3` ‚Äî 1 decimal\n- **Volume**: `45.2M shares` ‚Äî abbreviated\n- **Changes**: `‚Üë $3.42 (+1.27%)` or `‚Üì $1.15 (-0.82%)`\n- **52-week position**: show as a visual bar when possible\n- **Color coding** (in description): bullish = positive language, bearish = cautionary\n- **Always show data freshness**: \"As of market close Feb 24, 2026\"\n\n### Example report format\n\n```\nüìà AAPL ‚Äî Apple Inc.\n   $272.18  ‚Üë $4.42 (+1.65%)  |  Vol: 45.2M\n   52-Week: $169.21 ‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚óè‚Äî‚Äî‚Äî $288.62\n\n   Fundamentals\n   Mkt Cap: $4.1T    P/E: 33.2    Fwd P/E: 28.5\n   EPS: $8.20        Rev: $394.3B  Margin: 26.1%\n   ROE: 157.4%       D/E: 1.87     FCF: $101.2B\n   Div Yield: 0.44%  Beta: 1.24    Short: 0.65%\n\n   Technical\n   RSI (14): 58.3 (neutral)  |  MACD: +1.23 (bullish)\n   Above 50-day SMA ($265) ‚úì  |  Above 200-day SMA ($232) ‚úì\n   Trend: Golden Cross (bullish)\n\n   Analyst Consensus\n   Strong Buy (28) | Buy (8) | Hold (5) | Sell (1)\n   Target: $245 ‚Äì $320 (median $290)\n\n   Score: 7.8/10\n   Valuation: 5 | Profitability: 9 | Growth: 7 | Health: 6\n   Momentum: 7 | Dividends: 4 | Sentiment: 8 | Risk: 6\n```\n\n---\n\n## Notes\n\n- **Yahoo Finance chart API** requires no auth ‚Äî works with plain curl\n- **yfinance** provides the richest data but needs `pip install yfinance`\n- **Alpha Vantage** free tier: 25 requests/day ‚Äî use for technical indicators when yfinance isn't available\n- **Yahoo Finance may rate-limit** heavy usage ‚Äî space requests when processing many tickers\n- **After-hours prices** are in `meta.postMarketPrice` (Yahoo chart API)\n- **Pre-market prices** are in `meta.preMarketPrice`\n- **Options data** requires yfinance ‚Äî not available via the chart API\n- **Financial statements** require yfinance ‚Äî not available via the chart API\n- Crypto markets trade 24/7; stock markets have specific hours\n- Always note that this is **informational, not financial advice**",
  "parameters": [
    {
      "name": "ticker",
      "type": "string",
      "description": "Stock ticker symbol (e.g., AAPL, MSFT, BTC-USD, ^GSPC)",
      "required": false
    },
    {
      "name": "analysis_type",
      "type": "select",
      "description": "Type of analysis to perform",
      "required": false,
      "default": "full",
      "options": ["full", "technical", "fundamental", "compare", "screen", "dividends", "options"]
    }
  ],
  "enabled": true,
  "invocation": {
    "userInvocable": true
  },
  "metadata": {
    "version": "1.0.0",
    "author": "CoWork OS",
    "tags": ["stocks", "finance", "investing", "trading", "crypto", "market", "analysis", "portfolio"],
    "routing": {
      "useWhen": "User asks about stock prices, company fundamentals, market analysis, investment research, portfolio review, technical indicators, options, dividends, earnings, or crypto prices",
      "dontUseWhen": "User asks about prediction markets (use polymarket skill), personal banking, or tax advice",
      "outputs": "Stock quotes, fundamental analysis, technical indicators, analyst ratings, comparison tables, screening results, 8-dimensional scores",
      "successCriteria": "User receives accurate financial data with clear formatting, relevant context, and actionable insights"
    }
  }
}