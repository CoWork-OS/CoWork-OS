{
  "id": "youtube",
  "name": "YouTube",
  "description": "Fetch transcripts, metadata, and captions from YouTube videos. Use when you need to summarize a video, answer questions about its content, extract key points, compare videos, or pull quotes with timestamps. Supports auto-generated and manual captions, multiple languages, and translation.",
  "icon": "ðŸ“º",
  "category": "Tools",
  "requires": {
    "anyBins": ["yt-dlp", "python3"]
  },
  "install": [
    {
      "id": "brew-yt-dlp",
      "kind": "brew",
      "label": "Install yt-dlp (brew)",
      "formula": "yt-dlp",
      "bins": ["yt-dlp"],
      "os": ["darwin", "linux"]
    },
    {
      "id": "pip-transcript-api",
      "kind": "npm",
      "label": "Install youtube-transcript-api (pipx)",
      "package": "youtube-transcript-api",
      "bins": ["youtube_transcript_api"]
    }
  ],
  "prompt": "# YouTube â€” Video Intelligence\n\nFetch transcripts, metadata, and captions from YouTube videos. Two tools available depending on what's installed:\n\n- **yt-dlp** â€” full-featured: metadata, thumbnails, subtitles, audio, chapters\n- **youtube-transcript-api** (Python) â€” lightweight: transcripts only, with timestamps\n\nUse whichever is available. Prefer `yt-dlp` when installed.\n\n---\n\n## Extracting the Video ID\n\nYouTube URLs come in many formats. Extract the video ID first:\n\n| URL Format | Video ID |\n|------------|----------|\n| `https://www.youtube.com/watch?v=dQw4w9WgXcQ` | `dQw4w9WgXcQ` |\n| `https://youtu.be/dQw4w9WgXcQ` | `dQw4w9WgXcQ` |\n| `https://youtube.com/embed/dQw4w9WgXcQ` | `dQw4w9WgXcQ` |\n| `https://youtube.com/shorts/dQw4w9WgXcQ` | `dQw4w9WgXcQ` |\n| `https://m.youtube.com/watch?v=dQw4w9WgXcQ` | `dQw4w9WgXcQ` |\n\nRegex: `(?:v=|youtu\\.be/|embed/|shorts/)([a-zA-Z0-9_-]{11})`\n\n---\n\n## Method 1: yt-dlp (Recommended)\n\n### Get video metadata (no download)\n\n```bash\nyt-dlp --dump-json --no-download 'https://www.youtube.com/watch?v=VIDEO_ID' | python3 -c \"\nimport json, sys\nd = json.load(sys.stdin)\nprint(f'Title: {d[\"title\"]}')\nprint(f'Channel: {d[\"channel\"]}')\nprint(f'Duration: {d[\"duration_string\"]}')\nprint(f'Views: {d.get(\"view_count\", \"N/A\"):,}')\nprint(f'Upload: {d[\"upload_date\"]}')\nprint(f'Description: {d[\"description\"][:500]}')\nif d.get('chapters'):\n    print('\\nChapters:')\n    for ch in d['chapters']:\n        m, s = divmod(int(ch['start_time']), 60)\n        print(f'  {m:02d}:{s:02d} - {ch[\"title\"]}')\n\"\n```\n\n### Get available subtitles/captions\n\n```bash\nyt-dlp --list-subs --no-download 'https://www.youtube.com/watch?v=VIDEO_ID'\n```\n\n### Download transcript (auto-generated)\n\n```bash\nyt-dlp --write-auto-sub --sub-lang en --sub-format json3 --skip-download -o '/tmp/%(id)s' 'https://www.youtube.com/watch?v=VIDEO_ID'\n```\n\nThen read the subtitle file:\n\n```bash\npython3 -c \"\nimport json\nwith open('/tmp/VIDEO_ID.en.json3') as f:\n    data = json.load(f)\nfor event in data.get('events', []):\n    if 'segs' in event:\n        start = event.get('tStartMs', 0) / 1000\n        text = ''.join(seg.get('utf8', '') for seg in event['segs']).strip()\n        if text:\n            m, s = divmod(int(start), 60)\n            print(f'[{m:02d}:{s:02d}] {text}')\n\"\n```\n\n### Download manual captions (if available)\n\n```bash\nyt-dlp --write-sub --sub-lang en --sub-format json3 --skip-download -o '/tmp/%(id)s' 'https://www.youtube.com/watch?v=VIDEO_ID'\n```\n\n### Download transcript in a specific language\n\n```bash\nyt-dlp --write-auto-sub --sub-lang es --sub-format json3 --skip-download -o '/tmp/%(id)s' 'https://www.youtube.com/watch?v=VIDEO_ID'\n```\n\nCommon language codes: `en`, `es`, `fr`, `de`, `pt`, `ja`, `ko`, `zh`, `ar`, `hi`, `tr`\n\n### Download as plain text (SRT â†’ readable)\n\n```bash\nyt-dlp --write-auto-sub --sub-lang en --sub-format srt --skip-download -o '/tmp/%(id)s' 'https://www.youtube.com/watch?v=VIDEO_ID'\ncat /tmp/VIDEO_ID.en.srt | python3 -c \"\nimport sys, re\nlines = sys.stdin.read()\n# Strip SRT formatting, keep text\ntext = re.sub(r'\\d+\\n[\\d:,]+ --> [\\d:,]+\\n', '', lines)\ntext = re.sub(r'\\n{2,}', '\\n', text).strip()\nprint(text)\n\"\n```\n\n### Get chapters only\n\n```bash\nyt-dlp --dump-json --no-download 'https://www.youtube.com/watch?v=VIDEO_ID' | python3 -c \"\nimport json, sys\nd = json.load(sys.stdin)\nfor ch in d.get('chapters', []):\n    m, s = divmod(int(ch['start_time']), 60)\n    h, m = divmod(m, 60)\n    ts = f'{h}:{m:02d}:{s:02d}' if h else f'{m:02d}:{s:02d}'\n    print(f'{ts} - {ch[\"title\"]}')\n\"\n```\n\n### Download thumbnail\n\n```bash\nyt-dlp --write-thumbnail --skip-download -o '/tmp/%(id)s' 'https://www.youtube.com/watch?v=VIDEO_ID'\n```\n\n### Extract audio only (for speech analysis)\n\n```bash\nyt-dlp -x --audio-format mp3 -o '/tmp/%(id)s.%(ext)s' 'https://www.youtube.com/watch?v=VIDEO_ID'\n```\n\n---\n\n## Method 2: youtube-transcript-api (Python)\n\nLighter alternative when yt-dlp is not available.\n\n### Fetch transcript\n\n```bash\npython3 -c \"\nfrom youtube_transcript_api import YouTubeTranscriptApi\napi = YouTubeTranscriptApi()\ntranscript = api.fetch('VIDEO_ID')\nfor entry in transcript:\n    m, s = divmod(int(entry.start), 60)\n    print(f'[{m:02d}:{s:02d}] {entry.text}')\n\"\n```\n\n### Fetch in a specific language\n\n```bash\npython3 -c \"\nfrom youtube_transcript_api import YouTubeTranscriptApi\napi = YouTubeTranscriptApi()\ntranscript = api.fetch('VIDEO_ID', languages=['es', 'en'])\nfor entry in transcript:\n    m, s = divmod(int(entry.start), 60)\n    print(f'[{m:02d}:{s:02d}] {entry.text}')\n\"\n```\n\n### List available transcripts\n\n```bash\npython3 -c \"\nfrom youtube_transcript_api import YouTubeTranscriptApi\napi = YouTubeTranscriptApi()\ntranscripts = api.list('VIDEO_ID')\nfor t in transcripts:\n    kind = 'manual' if not t.is_generated else 'auto'\n    print(f'{t.language_code} ({t.language}) [{kind}]')\n\"\n```\n\n### Fetch as plain text (no timestamps)\n\n```bash\npython3 -c \"\nfrom youtube_transcript_api import YouTubeTranscriptApi\nfrom youtube_transcript_api.formatters import TextFormatter\napi = YouTubeTranscriptApi()\ntranscript = api.fetch('VIDEO_ID')\nprint(TextFormatter().format_transcript(transcript))\n\"\n```\n\n### Fetch as JSON\n\n```bash\npython3 -c \"\nfrom youtube_transcript_api import YouTubeTranscriptApi\nfrom youtube_transcript_api.formatters import JSONFormatter\napi = YouTubeTranscriptApi()\ntranscript = api.fetch('VIDEO_ID')\nprint(JSONFormatter().format_transcript(transcript, indent=2))\n\"\n```\n\n### Fetch as SRT\n\n```bash\npython3 -c \"\nfrom youtube_transcript_api import YouTubeTranscriptApi\nfrom youtube_transcript_api.formatters import SRTFormatter\napi = YouTubeTranscriptApi()\ntranscript = api.fetch('VIDEO_ID')\nprint(SRTFormatter().format_transcript(transcript))\n\"\n```\n\n### CLI usage (if installed via pip)\n\n```bash\nyoutube_transcript_api VIDEO_ID\nyoutube_transcript_api VIDEO_ID --languages en es\nyoutube_transcript_api VIDEO_ID --format json\nyoutube_transcript_api VIDEO_ID --translate de\nyoutube_transcript_api --list-transcripts VIDEO_ID\n```\n\n---\n\n## Common Workflows\n\n### \"Summarize this YouTube video\"\n\n1. Extract video ID from the URL\n2. Fetch metadata (title, channel, duration, chapters) with `yt-dlp --dump-json`\n3. Fetch the full transcript\n4. If chapters exist, organize the transcript by chapter sections\n5. Summarize each section, then provide an overall summary\n\n### \"What did they say about X?\"\n\n1. Fetch the transcript with timestamps\n2. Search for keywords related to X\n3. Return the relevant segments with timestamps so the user can jump to that part\n4. Format: `[12:34] \"exact quote about X...\"`\n\n### \"Compare these two videos\"\n\n1. Fetch transcripts for both videos\n2. Identify key topics in each\n3. Compare coverage, positions, and depth on shared topics\n4. Note unique points each video makes\n\n### \"Extract all links/resources mentioned\"\n\n1. Fetch transcript + description\n2. Parse description for URLs\n3. Scan transcript for mentioned tools, books, websites\n4. Compile a list with timestamps where each was mentioned\n\n### \"Turn this video into a blog post\"\n\n1. Fetch metadata + chapters + transcript\n2. Use chapters as section headings (or create logical sections)\n3. Clean up spoken language to written prose\n4. Add the video link as source attribution\n\n### \"Pull the key quotes with timestamps\"\n\n1. Fetch transcript with timestamps\n2. Identify notable/quotable statements\n3. Return as: `[MM:SS] \"quote\"` â€” each linking to that moment\n4. YouTube timestamp link format: `https://youtube.com/watch?v=VIDEO_ID&t=XXs`\n\n---\n\n## Timestamp Links\n\nTo link to a specific moment in a video:\n\n```\nhttps://youtube.com/watch?v=VIDEO_ID&t=123s\nhttps://youtu.be/VIDEO_ID?t=123\n```\n\nWhere `123` is the time in seconds. When showing quotes or references, always include a timestamp link so the user can verify.\n\n---\n\n## Formatting Guidelines\n\nWhen presenting video content:\n\n- **Always show the video title, channel, and duration** at the top\n- **Include chapter breakdown** if available â€” it's the creator's own outline\n- **Timestamps as [MM:SS]** â€” not raw seconds\n- **Quotes in quotation marks** with timestamps\n- **Distinguish manual vs auto-generated** captions â€” manual are more reliable\n- **For long videos (>30 min)**, summarize by chapter/section rather than one big summary\n- **Link to specific moments** using YouTube's `&t=` parameter\n- **Note transcript quality** â€” auto-generated captions lack punctuation and may have errors in names/jargon\n\n### Example output\n\n```\nðŸ“º How to Build a Startup in 2026 â€” Y Combinator (42:15)\n   Channel: Y Combinator  |  Views: 1.2M  |  Uploaded: 2026-01-15\n\n   Chapters:\n   00:00 - Introduction\n   03:22 - Finding a co-founder\n   12:45 - Validating your idea\n   24:10 - First 100 users\n   35:30 - Fundraising mistakes\n\n   Key points:\n   â€¢ [03:45] \"The best co-founder is someone you've already worked with\"\n   â€¢ [13:20] Talk to 50 potential customers before writing a line of code\n   â€¢ [25:15] Launch in a community where your first users already hang out\n   â€¢ [36:00] \"Don't raise more than you need â€” it changes your psychology\"\n```\n\n---\n\n## Notes\n\n- **No API key required** â€” both yt-dlp and youtube-transcript-api work without authentication\n- **Auto-generated captions** are available for most videos but may have transcription errors, especially with names, technical terms, and non-English accents\n- **Manual captions** (uploaded by creators) are more accurate but less common\n- **Some videos disable captions** â€” if no transcript is available, fall back to the video description + chapters\n- **Playlists**: yt-dlp can process entire playlists â€” use `--flat-playlist` to list videos without downloading\n- **Age-restricted videos** may require cookies â€” use `yt-dlp --cookies-from-browser chrome`\n- **Rate limiting**: YouTube may throttle repeated requests â€” space out batch operations\n- **Subtitle files are saved to /tmp** by default â€” clean up after processing\n- **yt-dlp updates frequently** â€” run `yt-dlp -U` to update if something breaks",
  "parameters": [
    {
      "name": "url",
      "type": "string",
      "description": "YouTube video URL or video ID",
      "required": false
    }
  ],
  "enabled": true,
  "invocation": {
    "userInvocable": true
  },
  "metadata": {
    "version": "1.0.0",
    "author": "CoWork OS",
    "tags": ["youtube", "video", "transcript", "captions", "subtitles", "summary"],
    "routing": {
      "useWhen": "User shares a YouTube link, asks to summarize a video, wants to know what a video says, asks to extract information from a YouTube video, or needs video transcripts",
      "dontUseWhen": "User wants to upload or stream video, manage a YouTube channel, or edit video files",
      "outputs": "Video transcripts with timestamps, summaries, key quotes, metadata, chapter breakdowns",
      "successCriteria": "User receives accurate transcript content with timestamps and clear formatting"
    }
  }
}